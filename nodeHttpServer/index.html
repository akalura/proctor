<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 35px;
            background: #f5f5f5;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 10px;
            max-width: 100%;
        }

        .header {
            background: #2196F3;
            color: white;
            padding: 8px 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            position: relative;
        }

        .question-number {
            font-size: 32px;
            opacity: 0.9;
        }

        .success-icon {
            position: absolute;
            top: 8px;
            right: 10px;
            font-size: 32px;
            color: white;
            background: #9C27B0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            font-weight: bold;
        }

        .success-icon.show {
            opacity: 1;
        }

        .content-scroll {
            flex: 1;
            overflow-y: scroll;
            scrollbar-width: thin;
            scrollbar-color: #888 #f1f1f1;
            padding-right: 5px;
        }

        .content-scroll::-webkit-scrollbar {
            width: 12px;
            -webkit-appearance: none;
        }

        .content-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .content-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
            min-height: 40px;
        }

        .content-scroll::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .content-scroll::-webkit-scrollbar-button {
            display: block;
            height: 12px;
        }

        .answer-container {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .ron-answer-text {
            background: #2196F3;
            color: white;
            padding: 15px 8px;
            border-radius: 4px;
            font-size: 41px;
            font-weight: bold;
            text-align: center;
            width: 120px;
            flex-shrink: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .answer-text {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 4px;
            font-size: 41px;
            font-weight: bold;
            text-align: center;
            flex: 1;
        }

        .question-text {
            font-size: 32px;
            font-weight: normal;
            margin: 10px 0;
            line-height: 1.3;
            flex-shrink: 0;
        }

        .dsp-answer-text {
            font-size: 42px;
            font-weight: normal;
            margin: 10px 0;
            line-height: 1.3;
            flex-shrink: 0;
            background-color: #4CAF50;
            color:#f1f1f1
        }

        .options {
            font-size: 30px;
            font-weight: normal;
            margin: 10px 0;
            line-height: 1.3;
            color: #555555;
        }

        .option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 8px;
        }

        .footer {
            display: flex;
            gap: 6px;
            margin-top: 10px;
        }

        button {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            font-size: 41px;
            cursor: pointer;
            font-weight: normal;
            min-width: 0;
        }

        .btn-prev {
            background: #757575;
            color: white;
        }

        .btn-next {
            background: #4CAF50;
            color: white;
        }

        .btn-submit {
            background: #FF9800;
            color: white;
        }

        .btn-capture {
            background: #9C27B0;
            color: white;
        }

        .btn-refresh {
            background: #00BCD4;
            color: white;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            background: #f44336;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        ol {
            list-style-type: decimal;
            list-style-position: inside;
            padding-left: 0;
            margin: 10px 0;
        }
        
        ol li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="question-number" id="questionNumber">Question 1 of 10</div>
            <div class="success-icon" id="successIcon">âœ“</div>
        </div>

        <div id="errorMsg" class="error" style="display: none;"></div>

        <div class="content-scroll">
            <div class="answer-container">
                <div class="ron-answer-text" id="ronAnswerText">N/A</div>
                <div class="answer-text" id="answerText">Answer: Loading...</div>
            </div>

            <div class="question-text" id="questionText">Loading question...</div>

            <div class="options" id="optionsContainer">
                <div class="loading">Loading...</div>
            </div>

            <div class="dsp-answer-text" id="dspanswerText"></div>
        </div>

        <div class="footer">
            <button class="btn-prev" id="btnPrev" onclick="previousQuestion()" disabled title="Previous">â—€</button>
            <button class="btn-next" id="btnNext" onclick="nextQuestion()" title="Next">â–¶</button>
            <button class="btn-capture" onclick="captureScreen()" title="Screen Capture">ðŸ“·</button>
            <button class="btn-refresh" onclick="refreshQuiz()" title="Refresh">ðŸ”„</button>
        </div>
    </div>

    <script>
        let currentQuestion = 0;
        let quizData = [{ "Time Remaining": "00:45:00", "Question Status": "1 testAK 20", "Question": "What is the capital city of Australia?", "Options": "A. Sydney, B. Melbourne, C. Canberra, D. Perth", "Answer": "C. Canberra is what is beleived to be true and have something in common like this", "RonAnswer": "A i think so" }, { "Time Remaining": "00:44:15", "Question Status": "2 of 20", "Question": "Which planet is known as the 'Red Planet'?", "Options": "A. Venus, B. Mars, C. Jupiter, D. Saturn", "Answer": "B. Mars", "RonAnswer": "N/A" }, { "Time Remaining": "00:43:30", "Question Status": "3 of 20", "Question": "In physics, what is the unit of electrical resistance?", "Options": "A. Ampere, B. Volt, C. Ohm, D. Watt", "Answer": "C. Ohm", "RonAnswer": "N/A" }, { "Time Remaining": "00:42:45", "Question Status": "4 of 20", "Question": "Which of the following is a programming language used for web development?", "Options": "A. Python, B. C++, C. JavaScript, D. R", "Answer": "C. JavaScript", "RonAnswer": "N/A" }, { "Time Remaining": "00:42:00", "Question Status": "5 of 20", "Question": "Who painted the Mona Lisa?", "Options": "A. Vincent van Gogh, B. Claude Monet, C. Leonardo da Vinci, D. Pablo Picasso", "Answer": "C. Leonardo da Vinci", "RonAnswer": "N/A" }, { "Time Remaining": "00:41:15", "Question Status": "6 of 20", "Question": "What is the chemical symbol for gold?", "Options": "A. Ag, B. Au, C. Fe, D. Pb", "Answer": "B. Au", "RonAnswer": "N/A" }, { "Time Remaining": "00:40:30", "Question Status": "7 of 20", "Question": "Which famous scientist developed the Theory of Relativity?", "Options": "A. Isaac Newton, B. Albert Einstein, C. Galileo Galilei, D. Nikola Tesla", "Answer": "B. Albert Einstein", "RonAnswer": "N/A" }, { "Time Remaining": "00:39:45", "Question Status": "8 of 20", "Question": "The process by which plants make their own food is called:", "Options": "A. Respiration, B. Transpiration, C. Photosynthesis, D. Germination", "Answer": "C. Photosynthesis", "RonAnswer": "N/A" }, { "Time Remaining": "00:39:00", "Question Status": "9 of 20", "Question": "What is the longest river in the world?", "Options": "A. Amazon River, B. Nile River, C. Yangtze River, D. Mississippi River", "Answer": "B. Nile River", "RonAnswer": "N/A" }, { "Time Remaining": "00:38:15", "Question Status": "10 of 20", "Question": "Which type of computer memory is volatile (loses its data when power is turned off)?", "Options": "A. ROM, B. Hard Drive, C. RAM, D. Solid State Drive", "Answer": "C. RAM", "RonAnswer": "N/A" }];
        let userAnswers = {};
        let raspberryPiFlaskServer="http://192.168.1.53:5000/"

        // Fetch quiz data from server
        async function fetchQuizData() {
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`/question.json?t=${timestamp}`);
                if (!response.ok) throw new Error('Failed to load quiz');
                quizData = await response.json();
                currentQuestion = quizData.length - 1;
                displayQuestion();
            } catch (error) {
                showError('Failed to load quiz. Please try again.');
                console.error(error);
            }

        }


        // Screen capture function
        async function captureScreen() {
            try {
                const response = await fetch(raspberryPiFlaskServer);
                if (response.ok) {
                    showSuccessIcon();
                }
            } catch (error) {
                console.error(error);
            }
        }

        // Show success icon and fade out
        function showSuccessIcon() {
            const icon = document.getElementById('successIcon');
            icon.classList.add('show');
            setTimeout(() => {
                icon.classList.remove('show');
            }, 2000);
        }        

        // Display current question
        function displayQuestion() {
            if (quizData.length === 0) return;

            const question = quizData[currentQuestion];
            document.getElementById('questionNumber').textContent = question["Question Status"];

            const answer = question["Answer"];
            let answerText = '';
            let answerDisplay = '';
            
            // Check if answer is an array
            if (Array.isArray(answer)) {
                answerText = answer.join(', ');
                answerDisplay = '<ol>' + answer.map(item => `<li>${item}</li>`).join('') + '</ol>';
            } else {
                answerText = `${answer}`;
                answerDisplay = answerText;
            }
            
            document.getElementById('answerText').textContent = answerText.length > 50 ? answerText.substring(0, 10) + '...' : answerText;

            document.getElementById('ronAnswerText').textContent = question["RonAnswer"];


            const questionText = `${question["Question"]}`;
            document.getElementById('questionText').textContent = questionText.length > 300 ? questionText.substring(0, 300) + '...' : questionText;


            const optionsText = `${question["Options"]}`;
            const container = document.getElementById('optionsContainer');
            container.innerHTML = optionsText.length > 250 ? optionsText.substring(0, 250) + '...' : optionsText;



            
            document.getElementById('dspanswerText').innerHTML = answerDisplay;
            

            updateButtons();
            hideError();
        }

        // Navigate to previous question
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }

        // Navigate to next question
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                displayQuestion();
            }
        }

        // Update button states
        function updateButtons() {
            document.getElementById('btnPrev').disabled = currentQuestion === 0;
            document.getElementById('btnNext').disabled = currentQuestion === quizData.length - 1;
        }



        // Refresh quiz data
        async function refreshQuiz() {
            document.getElementById('optionsContainer').innerHTML =
                '<div class="loading">Refreshing...</div>';

            try {
                await fetchQuizData();
            } catch (error) {
                showError('Refresh failed. Please try again.');
                console.error(error);
            }
        }

        // Error handling
        function showError(message) {
            const errorMsg = document.getElementById('errorMsg');
            errorMsg.textContent = message;
            errorMsg.style.display = 'block';
        }

        function hideError() {
            document.getElementById('errorMsg').style.display = 'none';
        }

        // Initialize on page load
        fetchQuizData();
    </script>
</body>

</html>